---
name: kintone-expert
description: Kintone API統合、認証、データ同期、およびカスタマイズに関する専門知識を提供します。
---

# Kintone エキスパートスキル

このスキルは、Kintone APIとの統合やデータ連携のベストプラクティスをガイドします。

## 1. 認証と接続
- **ドメイン設定**: サブドメインを正確に抽出してください（例: `https://{subdomain}.cybozu.com`）。
- **トークン管理**: アクセストークンとリフレッシュトークンの適切なハンドリング。
- **クライアント作成**: `KintoneApiClient` を使用する際は、完全なドメインURLを指定すること。

## 2. クエリ構築とエラー対応
- **フィルタークエリ**: データベースの設定（`connector_app_filters`など）から動的にクエリを構築します。
- **CB_VA01 エラー**: クエリ形式が不正な場合に発生します。AND条件の結合やダブルクォートの扱いを確認してください。
- **バリデーション**: `scheduledDateOfEntry` などの必須項目が不足していないか確認してください。

## 3. データ同期パターン
- **Upsert ロジック**: レコードID（`$id`）をベースに、既存レコードの更新または新規作成を適切に行います。
- **フィールドマッピング**: `connector_field_mappings` に基づいて、SupabaseとKintoneのフィールドを動的に変換します。
- **Dynamic Owner ID**: テナント管理（Tenant Management）においては、`owner_id` を固定せず、リクエストに基づいて動的に設定するパターンを推奨します。

## 4. 特殊なケース（Bulk Migration）
- 大量データの移行時には、バリデーションエラーを避けるために一時的に制約を緩和するか、必須項目をプレースホルダーで埋める検討をしてください。
